{
  "command": "cat >> /var/www/nfe-api/src/Services/SupabaseService.php << 'REQUEST_EOF'\n    \n    /**\n     * Fazer requisição HTTP\n     */\n    private function makeRequest($method, $url, $data = null, $headers = [])\n    {\n        $ch = curl_init();\n        \n        curl_setopt_array($ch, [\n            CURLOPT_URL => $url,\n            CURLOPT_RETURNTRANSFER => true,\n            CURLOPT_CUSTOMREQUEST => $method,\n            CURLOPT_HTTPHEADER => $headers,\n            CURLOPT_TIMEOUT => 30,\n            CURLOPT_SSL_VERIFYPEER => false,\n            CURLOPT_SSL_VERIFYHOST => false\n        ]);\n        \n        if ($data && in_array($method, ['POST', 'PATCH', 'PUT'])) {\n            curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));\n        }\n        \n        $response = curl_exec($ch);\n        $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);\n        $error = curl_error($ch);\n        \n        curl_close($ch);\n        \n        if ($error) {\n            throw new Exception('Erro cURL: ' . $error);\n        }\n        \n        if ($httpCode >= 400) {\n            throw new Exception('Erro HTTP: ' . $httpCode . ' - ' . $response);\n        }\n        \n        return json_decode($response, true);\n    }\n}\n?>\nREQUEST_EOF"
}
